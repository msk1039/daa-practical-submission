#include <iostream>
#include <vector>
#include <string>
using namespace std;

class Movie {
public:
    string title;
    double imdbRating;
    int releaseYear;
    long long watchTime;

    Movie(string t, double r, int y, long long w) {
        title = t;
        imdbRating = r;
        releaseYear = y;
        watchTime = w;
    }
};

class QuickSort {
public:
    int partition(vector<Movie>& arr, int low, int high, int choice) {
        Movie pivot = arr[low];
        int i = low + 1;
        int j = high;

        while (true) {
            while (i <= high && compare(arr[i], pivot, choice))
                i++;
            while (j >= low && compare(pivot, arr[j], choice))
                j--;

            if (i < j)
                swap(arr[i], arr[j]);
            else
                break;
        }
        swap(arr[low], arr[j]);
        return j;
    }

    void quickSort(vector<Movie>& arr, int low, int high, int choice) {
        if (low < high) {
            int p = partition(arr, low, high, choice);
            quickSort(arr, low, p - 1, choice);
            quickSort(arr, p + 1, high, choice);
        }
    }

    bool compare(Movie& a, Movie& b, int choice) {
        if (choice == 1) return a.imdbRating < b.imdbRating;
        if (choice == 2) return a.releaseYear < b.releaseYear;
        return a.watchTime < b.watchTime;
    }
};

int main() {

    int n = 3;
    vector<Movie> movies;
    movies.push_back(Movie("DDLJ", 9.8, 1990, 170));
    movies.push_back(Movie("YJHD", 9.7, 2010, 150));
    movies.push_back(Movie("Sholay", 9.9, 1976, 180));

    int choice = 2; // Sort by Year

    QuickSort sorter;
    sorter.quickSort(movies, 0, n - 1, choice);

    cout << "\nSorted Movies:\n";
    for (auto& m : movies) {
        cout << m.title << " | Rating: " << m.imdbRating
             << " | Year: " << m.releaseYear
             << " | WatchTime: " << m.watchTime << endl;
    }

    return 0;
}




/*
Time Complexity:
- Best Case: O(n log n)
- Average Case: O(n log n)
- Worst Case: O(n^2)
The time complexity of Quick Sort is O(n log n) on average and in the best case. The worst case occurs when the pivot element is always the smallest or largest element, leading to O(n^2) complexity.

Space Complexity: O(log n)
The space complexity is O(log n) for the recursion stack in the average case. In the worst case, it can be O(n).
*/